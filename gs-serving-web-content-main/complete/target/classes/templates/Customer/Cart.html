<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Gi·ªè H√†ng</title>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 p-6">
<div class="max-w-4xl mx-auto bg-white p-6 shadow-md rounded">
    <h2 class="text-2xl font-bold mb-2">üõí Gi·ªè H√†ng C·ªßa B·∫°n</h2>

    <!-- ü™ë B√†n ƒë√£ ƒë·∫∑t (s·∫Ω hi·ªÉn th·ªã b·∫±ng JavaScript n·∫øu c√≥) -->
    <div id="tableInfo" class="text-green-600 font-semibold mb-4 hidden">
        ü™ë B√†n ƒë√£ ƒë·∫∑t: <span id="tableName"></span>
    </div>

    <!-- N·∫øu gi·ªè h√†ng ch∆∞a kh·ªüi t·∫°o -->
    <div th:if="${cart == null}">
        <p class="text-gray-500 italic">Kh√¥ng th·ªÉ hi·ªÉn th·ªã gi·ªè h√†ng. Vui l√≤ng th·ª≠ l·∫°i.</p>
    </div>

    <!-- N·∫øu gi·ªè h√†ng r·ªóng -->
    <div th:if="${#lists.isEmpty(cart)}">
        <p class="text-gray-600 italic">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng.</p>
    </div>

    <!-- N·∫øu c√≥ m√≥n trong gi·ªè -->
    <div th:if="${not #lists.isEmpty(cart)}">
        <table class="table-auto w-full text-left border-collapse">
            <thead>
            <tr class="bg-gray-200">
                <th class="p-2">T√™n M√≥n ƒÇn</th>
                <th class="p-2 text-center">S·ªë L∆∞·ª£ng</th>
                <th class="p-2 text-right">ƒê∆°n Gi√°</th>
                <th class="p-2 text-right">Th√†nh Ti·ªÅn</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${cart}" class="border-b">
                <td class="p-2" th:text="${item.tenMonAn}">T√™n m√≥n</td>
                <td class="p-2 text-center" th:text="${item.soLuong}">1</td>
                <td class="p-2 text-right"
                    th:text="${#numbers.formatDecimal(item.getThanhTien() / item.soLuong, 0, 'POINT', '.', ',')} + '‚Ç´'">
                    60.000‚Ç´
                </td>
                <td class="p-2 text-right"
                    th:text="${#numbers.formatDecimal(item.getThanhTien(), 0, 'POINT', '.', ',')} + '‚Ç´'">
                    60.000‚Ç´
                </td>
            </tr>
            </tbody>
        </table>

        <!-- T·ªïng c·ªông -->
        <div class="text-right mt-4">
            <p class="text-xl font-semibold">T·ªïng c·ªông:
                <span class="text-red-600 font-bold"
                      th:text="${#numbers.formatDecimal(total, 0, 'POINT', '.', ',')} + '‚Ç´'">0‚Ç´</span>
            </p>
        </div>
    </div>

    <!-- N√∫t ƒëi·ªÅu h∆∞·ªõng -->
    <div class="mt-6 flex justify-between">
        <a href="/menu" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded">
            ‚Üê Ti·∫øp t·ª•c ch·ªçn m√≥n
        </a>

        <form th:action="@{/invoice/confirm}" method="post">
            <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">
                X√°c nh·∫≠n & Thanh to√°n
            </button>
        </form>
    </div>
</div>

<!-- SCRIPT ƒë·ªÉ hi·ªÉn th·ªã b√†n ƒë√£ ƒë·∫∑t -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const table = sessionStorage.getItem("selectedTable");
    if (table) {
      document.getElementById("tableName").innerText = table;
      document.getElementById("tableInfo").classList.remove("hidden");
    }
  });
</script>
</body>
</html>

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω Nh√¢n Vi√™n</title>
    <style>
        /* Giao di·ªán t·ªïng th·ªÉ */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f4f6f8;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 30px 20px;
            background: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-radius: 16px;
        }

        h1, h2 {
            color: #2c3e50;
            margin-top: 24px;
        }

        form {
            margin-top: 15px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
        }

        input, button, a {
            padding: 10px 14px;
            border: 1px solid #ccc;
            border-radius: 8px;
            outline: none;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        input:focus {
            border-color: #3498db;
            box-shadow: 0 0 6px rgba(52, 152, 219, 0.3);
        }

        button {
            background-color: #ecf0f1;
            cursor: pointer;
            font-weight: bold;
        }

        button:hover {
            background-color: #d0d7de;
        }

        button[type="submit"] {
            background-color: #2ecc71;
            color: white;
            border: none;
        }

        button[type="submit"]:hover {
            background-color: #27ae60;
        }

        button[type="button"] {
            background-color: #f1c40f;
            color: white;
            border: none;
        }

        button[type="button"]:hover {
            background-color: #f39c12;
        }

        a {
            background-color: #e74c3c;
            color: white;
            text-decoration: none;
            border: none;
            font-weight: bold;
        }

        a:hover {
            background-color: #c0392b;
        }

        table {
            width: 100%;
            margin-top: 20px;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            background-color: #ffffff;
        }

        th, td {
            padding: 14px;
            border-bottom: 1px solid #f0f0f0;
            text-align: center;
        }

        th {
            background-color: #ecf0f1;
            font-weight: bold;
            color: #34495e;
        }

        tr:last-child td {
            border-bottom: none;
        }

        td button, td a {
            margin: 2px;
        }

        td a {
            display: inline-block;
            padding: 6px 12px;
        }

        h2 {
            margin-top: 40px;
            margin-bottom: 10px;
            font-size: 20px;
        }

        /* Modal s·ª≠a nh√¢n vi√™n */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 12px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            position: relative;
        }

        .close {
            position: absolute;
            right: 16px;
            top: 8px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
        }
    </style>

    <script>
        function fillEdit(button) {
            // G√°n d·ªØ li·ªáu
            document.getElementById("id_NhanVien").value = button.getAttribute("data-id");
            document.getElementById("tenNV").value = button.getAttribute("data-ten");
            document.getElementById("ngayVL").value = button.getAttribute("data-ngayvl");
            document.getElementById("sdt").value = button.getAttribute("data-sdt");
            document.getElementById("chucvu").value = button.getAttribute("data-chucvu");
            document.getElementById("id_NQL").value = button.getAttribute("data-idnql");
            document.getElementById("tinhTrang").value = button.getAttribute("data-tinhtrang");

            // Hi·ªÉn th·ªã modal
            document.getElementById("editModal").style.display = "block";
        }

        function closeModal() {
            document.getElementById("editModal").style.display = "none";
        }

        // ·∫®n modal n·∫øu click ra ngo√†i
        window.onclick = function(event) {
            const modal = document.getElementById("editModal");
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }
    </script>
</head>
<body>
<div class="container">
    <h1>Qu·∫£n l√Ω Nh√¢n Vi√™n</h1>

    <!-- üîç T√¨m ki·∫øm -->
    <form th:action="@{/nhanvien/timkiem}" method="get">
        <input type="text" name="keyword" placeholder="Nh·∫≠p t√™n nh√¢n vi√™n" th:value="${tuKhoa}">
        <button type="submit">üîç T√¨m</button>
        <a th:href="@{/nhanvien}">‚Üª T·∫£i l·∫°i</a>
    </form>

    <!-- ‚ûï Th√™m nh√¢n vi√™n -->
    <h2>Th√™m Nh√¢n Vi√™n</h2>
    <form th:action="@{/nhanvien/them}" method="post" th:object="${nvMoi}">
        <input type="text" th:field="*{hoTen}" placeholder="T√™n nh√¢n vi√™n" required>
        <input type="date" th:field="*{ngayVL}" required>
        <input type="text" th:field="*{sdt}" placeholder="S·ªë ƒëi·ªán tho·∫°i" required>
        <input type="text" th:field="*{chucvu}" placeholder="Ch·ª©c v·ª•">
        <input type="number" th:field="*{id_NQL}" placeholder="ID NQL">
        <input type="text" th:field="*{tinhTrang}" placeholder="T√¨nh tr·∫°ng">
        <button type="submit">‚ûï Th√™m</button>
    </form>

    <!-- üìã Danh s√°ch Nh√¢n Vi√™n -->
    <h2>Danh s√°ch Nh√¢n Vi√™n</h2>
    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>T√™n</th>
            <th>Ng√†y VL</th>
            <th>SƒêT</th>
            <th>Ch·ª©c v·ª•</th>
            <th>ID NQL</th>
            <th>T√¨nh tr·∫°ng</th>
            <th>H√†nh ƒë·ªông</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="nv : ${dsNhanVien}">
            <td th:text="${nv.id_NhanVien}">1</td>
            <td th:text="${nv.hoTen}">Nguy·ªÖn VƒÉn A</td>
            <td th:text="${nv.ngayVL}">2025-01-01</td>
            <td th:text="${nv.sdt}">0123456789</td>
            <td th:text="${nv.chucvu}">Ph·ª•c v·ª•</td>
            <td th:text="${nv.id_NQL}">2</td>
            <td th:text="${nv.tinhTrang}">ƒêang l√†m</td>
            <td>
                <button type="button"
                        onclick="fillEdit(this)"
                        th:attr="data-id=${nv.id_NhanVien},
                                 data-ten=${nv.hoTen},
                                 data-ngayvl=${nv.ngayVL},
                                 data-sdt=${nv.sdt},
                                 data-chucvu=${nv.chucvu},
                                 data-idnql=${nv.id_NQL},
                                 data-tinhtrang=${nv.tinhTrang}">
                    ‚úèÔ∏è S·ª≠a
                </button>
                <a th:href="@{/nhanvien/xoa/{id}(id=${nv.id_NhanVien})}"
                   onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën xo√° nh√¢n vi√™n n√†y?')">üóëÔ∏è Xo√°</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- ‚úÖ Modal s·ª≠a nh√¢n vi√™n -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>S·ª≠a Nh√¢n Vi√™n</h2>
        <form th:action="@{/nhanvien/sua}" method="post" th:object="${nvMoi}">
            <input type="hidden" id="id_NhanVien" th:field="*{id_NhanVien}">
            <input type="text" id="tenNV" th:field="*{hoTen}" placeholder="T√™n nh√¢n vi√™n" required>
            <input type="date" id="ngayVL" th:field="*{ngayVL}" required>
            <input type="text" id="sdt" th:field="*{sdt}" placeholder="S·ªë ƒëi·ªán tho·∫°i" required>
            <input type="text" id="chucvu" th:field="*{chucvu}" placeholder="Ch·ª©c v·ª•">
            <input type="number" id="id_NQL" th:field="*{id_NQL}" placeholder="ID NQL">
            <input type="text" id="tinhTrang" th:field="*{tinhTrang}" placeholder="T√¨nh tr·∫°ng">
            <button type="submit">‚úÖ C·∫≠p nh·∫≠t</button>
        </form>
    </div>
</div>
</body>
</html>
